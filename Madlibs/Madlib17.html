<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>The Cursed Candy Factory Tour</title>
  <style>
    body {
      background-color: #0d0000;
      font-family: 'Cinzel', serif;
      color: #f5e3e3;
      margin: 0;
      padding: 2rem;
      display: flex;
      justify-content: center;
      align-items: flex-start;
      min-height: 100vh;
      background-image: radial-gradient(circle at 30% 10%, #250000, #000000 80%);
      overflow-x: hidden;
    }
    .container {
      background-color: #1a0000;
      border-radius: 12px;
      padding: 2rem;
      max-width: 850px;
      width: 100%;
      box-shadow: 0 0 35px rgba(255, 0, 0, 0.3);
      border: 1px solid #440000;
    }
    h1 {
      text-align: center;
      color: #ff4444;
      margin-bottom: 1rem;
      text-shadow: 0 0 15px #ff0000;
      letter-spacing: 2px;
    }
    p.instructions {
      text-align: center;
      font-size: 1rem;
      color: #d6bcbc;
      margin-bottom: 2rem;
    }
    form {
      display: flex;
      flex-direction: column;
      gap: 1rem;
    }
    input[type="text"] {
      padding: 0.7rem;
      font-size: 1rem;
      border-radius: 6px;
      border: 1px solid #550000;
      background-color: #2b0000;
      color: #ffaaaa;
    }
    input[type="text"]::placeholder {
      color: #885555;
    }
    button {
      margin-top: 1.5rem;
      background-color: #7a0000;
      color: #f8eaea;
      padding: 0.75rem;
      border: none;
      font-size: 1.1rem;
      border-radius: 6px;
      cursor: pointer;
      font-weight: bold;
      letter-spacing: 1px;
      text-transform: uppercase;
    }
    button:hover {
      background-color: #b00000;
      color: #fff;
      box-shadow: 0 0 10px #ff0000;
    }
    .story {
      background-color: #130000;
      border-left: 6px solid #b30000;
      padding: 1.5rem;
      margin-top: 2rem;
      border-radius: 8px;
      white-space: pre-line;
      display: none;
      color: #ffecec;
      line-height: 1.7;
    }
    #tryAgainBtn {
      display: none;
      margin-top: 1.5rem;
      background-color: #330000;
      color: #ff8888;
      border: 1px solid #b30000;
    }
    #tryAgainBtn:hover {
      background-color: #b30000;
      color: #fff;
    }
  </style>
</head>
<body>

<div class="container">
  <h1>The Cursed Candy Factory Tour</h1>
  
  <form id="madLibForm">
    <p class="instructions">Fill in the blanks below... and prepare for a tour you’ll never forget.</p>
    
    <input type="text" name="name" placeholder="Your name" required />
    <input type="text" name="candy" placeholder="Your favorite candy" required />
    <input type="text" name="adjective1" placeholder="An adjective (e.g., sticky, rotten, glowing)" required />
    <input type="text" name="adjective2" placeholder="Another adjective (e.g., sweet, decayed)" required />
    <input type="text" name="verb" placeholder="A verb (e.g., chew, melt, scream)" required />
    <input type="text" name="sound" placeholder="A disturbing sound" required />
    <input type="text" name="bodyPart" placeholder="A body part" required />
    <input type="text" name="flavor" placeholder="A flavor (e.g., cherry, sulfur, blood)" required />
    <input type="text" name="creature" placeholder="A creature (real or not)" required />
    <input type="text" name="emotion" placeholder="An emotion (e.g., dread, euphoria)" required />
    <input type="text" name="object" placeholder="An object (e.g., key, wrapper, jawbreaker)" required />
    <input type="text" name="number" placeholder="A number" required />

    <button type="submit">Begin the Tour</button>
  </form>

  <div id="story" class="story"></div>
  <button id="tryAgainBtn">Try Again</button>
</div>

<script>
  const form = document.getElementById('madLibForm');
  const storyDiv = document.getElementById('story');
  const tryAgainBtn = document.getElementById('tryAgainBtn');

  form.addEventListener('submit', function(e) {
    e.preventDefault();
    const values = Object.fromEntries(new FormData(form).entries());
    form.style.display = 'none';
    const rawStory = generateStory(values);
    const formattedStory = formatStoryText(rawStory);
    storyDiv.innerHTML = formattedStory;
    storyDiv.style.display = 'block';
    tryAgainBtn.style.display = 'block';
  });

  tryAgainBtn.addEventListener('click', () => {
    form.reset();
    form.style.display = 'flex';
    storyDiv.style.display = 'none';
    tryAgainBtn.style.display = 'none';
  });

  function generateStory(values) {
    const { name, candy, adjective1, adjective2, verb, sound, bodyPart, flavor, creature, emotion, object, number } = values;

    return `
It was supposed to be a simple tour. ${name} had always loved ${candy}, so when the letter arrived-handwritten in chocolate ink-they couldn’t resist.

The gates of the **${adjective1} Candy Factory** creaked open, breathing out a smell like sugar and rot. The walls glistened with syrup that *moved* when no one was watching.

A voice, smooth and sticky, whispered, “Welcome, sweet ${name}… we’ve been expecting you.”

Inside, conveyor belts carried lumps of ${adjective2} candy shaped like ${bodyPart}s. The air was thick with ${flavor} and something else-something metallic. Each machine seemed alive, groaning like it was in pain.

Then came the ${sound}. It echoed through the halls, bouncing off the caramel-stained walls. A shadow moved-a ${creature}, its jaw fused with toffee, dragging a trail of melted treats.

“You must ${verb},” the guide said, smiling too wide. “Taste what we’ve made for you.”

${name} lifted a candy from the table. It pulsed, warm, like it had a heartbeat. The moment they bit down, ${emotion} flooded their mind, and the world tilted.

Machines screamed. Chocolate rivers boiled. The ${object} in their pocket began to hum-counting down from ${number}...

“Run,” whispered a voice from inside the vat.

The factory doors slammed shut. The lights flickered red, coating everything in syrupy shadows. Somewhere behind them, the ${creature} whispered their name-slowly, sweetly.

And then came that ${sound.toUpperCase()} again, much closer this time...

The tour was over.

For everyone else, at least.
    `;
  }

  function formatStoryText(story) {
    return "<p>" + story.trim().replace(/\n/g, "</p><p>") + "</p>";
  }
</script>

</body>
</html>
